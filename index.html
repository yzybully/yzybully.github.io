<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>YZYPlayer BETA</title>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono&display=swap" rel="stylesheet" />
  <style>
    :root { --bg:#0a0a0a; --muted:#161616; --muted2:#1f1f1f; --text:#fff; --text2:#fff; --acc:#fff; --card:#111; --shadow:0 12px 30px rgba(0,0,0,.35); }
    * { box-sizing:border-box; }
    html,body { height:100%; }
    body { margin:0; background:var(--bg); color:var(--text); font-family:"IBM Plex Mono", monospace; text-transform:uppercase; letter-spacing:.06em; }
    a { color:inherit; text-decoration:none; }
    .app { display:grid; grid-template-columns:280px 1fr; height:100dvh; }
    .sidebar { background:linear-gradient(180deg, #0e0e0e, #070707); border-right:1px solid #111; padding:22px 16px; display:flex; flex-direction:column; gap:18px; }
    .brand { font-size:22px; font-weight:600; letter-spacing:.18em; }
    .muted { color:var(--text2); font-size:11px; margin-top:2px; }
    .nav { display:flex; flex-direction:column; gap:10px; margin-top:18px; }
    .btn { display:flex; align-items:center; gap:10px; padding:12px 14px; background:var(--muted); border:1px solid #191919; border-radius:14px; cursor:pointer; transition:.25s transform,.25s background,.25s border-color; font-size:12px; color:#fff; }
    .btn:hover { transform:translateY(-2px); background:var(--muted2); border-color:#242424; }
    .btn.active { outline:1px solid #2b2b2b; background:#131313; }
    .main { position:relative; overflow:hidden; }
    .page { position:absolute; inset:0; padding:24px; overflow:auto; opacity:0; transform:translateY(8px); pointer-events:none; transition:opacity .35s ease, transform .35s ease; }
    .page.show { opacity:1; transform:none; pointer-events:auto; }
    .grid { display:grid; grid-template-columns:repeat(auto-fill, minmax(160px,1fr)); gap:16px; }
    .section { margin-bottom:28px; }
    .section h2 { font-size:14px; color:var(--text2); margin:0 0 12px; letter-spacing:.12em; }
    .card { background:var(--card); border:1px solid #171717; border-radius:18px; padding:14px; box-shadow:var(--shadow); transition:transform .25s ease, border-color .25s ease; display:flex; flex-direction:column; gap:10px; color:#fff; }
    .card:hover { transform:translateY(-4px); border-color:#242424; }
    .cover { width:100%; aspect-ratio:1/1; border-radius:14px; object-fit:cover; background:#0d0d0d; }
    .title { font-size:12px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .subtitle { font-size:11px; color:var(--text2); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .card-row { display:flex; align-items:center; justify-content:space-between; gap:8px; }
    .like { width:28px; height:28px; border-radius:50%; border:1px solid #222; background:#141414; display:grid; place-items:center; cursor:pointer; transition:.2s; color:#fff; }
    .like.active { background:#1c1c1c; border-color:#2a2a2a; }
    .like svg { width:14px; height:14px; fill:currentColor; }
    .player { position:fixed; left:280px; right:0; bottom:0; background:linear-gradient(180deg,#0c0c0c,#050505); border-top:1px solid #171717; display:grid; grid-template-columns:1fr auto 1fr; align-items:center; gap:10px; padding:12px 18px; z-index:5; }
    .track { display:flex; align-items:center; gap:12px; min-width:0; }
    .track img { width:44px; height:44px; border-radius:10px; border:1px solid #1a1a1a; object-fit:cover; }
    .track .meta { min-width:0; }
    .controls { display:flex; align-items:center; gap:10px; }
    .ctl { width:38px; height:38px; border-radius:12px; border:1px solid #212121; background:#121212; display:grid; place-items:center; cursor:pointer; transition:.2s; color:#fff; }
    .ctl:hover { transform:translateY(-2px); }
    .progress { display:flex; align-items:center; gap:10px; padding:0 8px; }
    .range { -webkit-appearance:none; appearance:none; height:4px; width:32vw; background:#1a1a1a; border-radius:999px; outline:none; }
    .range::-webkit-slider-thumb { -webkit-appearance:none; appearance:none; width:14px; height:14px; border-radius:50%; background:#fff; cursor:pointer; }
    .vol { width:120px; }
    .login, .admin { max-width:680px; margin:0 auto; background:var(--card); border:1px solid #171717; border-radius:18px; padding:18px; box-shadow:var(--shadow); }
    .row { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
    .field { display:flex; flex-direction:column; gap:8px; }
    input, select { background:#0e0e0e; border:1px solid #1a1a1a; border-radius:12px; padding:12px 12px; color:var(--text); outline:none; transition:.2s; font-family:"IBM Plex Mono", monospace; text-transform:uppercase; }
    input:focus, select:focus { border-color:#2a2a2a; }
    .submit { margin-top:10px; width:100%; padding:12px; border-radius:14px; background:#151515; border:1px solid #222; cursor:pointer; font-size:12px; color:#fff; }
    .ghost { background:#101010; }
    .hint { color:var(--text2); font-size:11px; margin-top:6px; }
    .empty { color:var(--text2); text-align:center; padding:60px 10px; font-size:12px; }
    .spacer { height:84px; }
    @media (max-width: 900px) { .app { grid-template-columns:1fr; } .sidebar { position:fixed; inset:auto 0 0 0; flex-direction:row; align-items:center; z-index:10; border-right:0; border-top:1px solid #111; padding:8px; gap:8px; } .brand, .muted { display:none; } .nav { flex-direction:row; width:100%; margin:0; } .btn { flex:1; justify-content:center; } .player { left:0; } .page { padding-bottom:120px; } }
  </style>
</head>
<body>
<div class="app">
<aside class="sidebar">
  <div>
    <div class="brand">YZYPLAYER</div>
    <div class="muted">HTTPS://DISCORD.GG/5QC4NQMPDV</div>
  </div>
  <nav class="nav">
    <a href="#home" class="btn" data-route="home">HOME</a>
    <a href="#profile" class="btn" data-route="profile">PROFILE</a>
    <a href="#liked" class="btn" data-route="liked">LIKED SONGS</a>
    <a href="#admin" class="btn" data-route="admin">ADMIN PANEL</a>
  </nav>
</aside>
<main class="main">
  <section id="home" class="page show">
    <div class="section"><h2>ALBUMS</h2><div id="albums" class="grid"></div></div>
    <div class="section"><h2>EPS</h2><div id="eps" class="grid"></div></div>
    <div class="section"><h2>SINGLES</h2><div id="singles" class="grid"></div></div>
    <div class="spacer"></div>
  </section>
  <section id="profile" class="page"><div class="empty">COMING SOON</div></section>
  <section id="liked" class="page"><div id="likedGrid" class="grid"></div><div class="spacer"></div></section>
  <section id="admin" class="page">
    <div id="adminGate" class="login">
      <div class="field">
        <label>PASSWORD</label>
        <input id="adminPassword" type="password" placeholder="ENTER PASSWORD" autocomplete="current-password" />
        <button id="adminLogin" class="submit">ENTER</button>
        <div id="loginHint" class="hint"></div>
      </div>
    </div>
    <div id="adminForm" class="admin" style="display:none">
      <div class="row">
        <div class="field"><label>TITLE</label><input id="fTitle" placeholder="TITLE" /></div>
        <div class="field"><label>ARTIST</label><input id="fArtist" placeholder="ARTIST" /></div>
      </div>
      <div class="row">
        <div class="field"><label>TYPE</label>
          <select id="fType">
            <option value="ALBUM">ALBUM</option>
            <option value="EP">EP</option>
            <option value="SINGLE">SINGLE</option>
          </select>
        </div>
        <div class="field"><label>ALBUM NAME</label><input id="fAlbum" placeholder="OPTIONAL" /></div>
      </div>
      <div class="row">
        <div class="field"><label>MP3 URL</label><input id="fUrl" placeholder="HTTPS://...MP3" /></div>
        <div class="field"><label>COVER URL</label><input id="fCover" placeholder="HTTPS://...JPG/PNG" /></div>
      </div>
      <button id="fSubmit" class="submit">ADD TO LIBRARY</button>
      <button id="fExport" class="submit ghost">EXPORT LIBRARY JSON</button>
      <div class="hint">DATA STORED IN LOCAL STORAGE</div>
    </div>
  </section>
</main>
</div>

<div class="player">
  <div class="track">
    <img id="pCover" src="" alt="" />
    <div class="meta">
      <div id="pTitle" class="title">NOTHING PLAYING</div>
      <div id="pArtist" class="subtitle"></div>
    </div>
  </div>
  <div class="controls">
    <button id="prev" class="ctl">⟨</button>
    <button id="play" class="ctl">▶</button>
    <button id="next" class="ctl">⟩</button>
    <div class="progress">
      <span id="cur" class="subtitle" style="width:40px; text-align:right;">0:00</span>
      <input id="seek" type="range" class="range" min="0" max="1000" value="0" />
      <span id="dur" class="subtitle" style="width:40px;">0:00</span>
    </div>
  </div>
  <div class="controls" style="justify-content:flex-end;">
    <span class="subtitle">VOL</span>
    <input id="vol" type="range" class="range vol" min="0" max="1" step="0.01" value="1" />
  </div>
</div>
<audio id="audio"></audio>

<script>
const state={library:JSON.parse(localStorage.getItem("yzy_library")||"[]"), likes:JSON.parse(localStorage.getItem("yzy_likes")||"[]"), queue:[], current:-1};
const routes=["home","profile","liked","admin"]; const pages=Object.fromEntries(routes.map(r=>[r,document.getElementById(r)]));
function nav(route){ routes.forEach(r=>pages[r].classList.toggle("show", r===route)); document.querySelectorAll(".btn").forEach(b=>b.classList.toggle("active", b.dataset.route===route)); if(route==="liked") renderLiked(); if(route==="home") renderHome(); }
window.addEventListener("hashchange",()=>nav(location.hash.replace("#","")||"home")); nav(location.hash.replace("#","")||"home");

function save(){ localStorage.setItem("yzy_library",JSON.stringify(state.library)); localStorage.setItem("yzy_likes",JSON.stringify(state.likes)); }

function uid(){ return Date.now().toString()+Math.random().toString(36).slice(2); }

function card(item){
  const el=document.createElement("div"); el.className="card";
  el.innerHTML=`<img class="cover" src="${item.cover||""}" alt=""><div class="title">${item.title||"UNTITLED"}</div><div class="card-row"><div class="subtitle">${item.artist||"UNKNOWN"}</div><button class="like ${state.likes.includes(item.id)?"active":""}" aria-label="like">${heartSvg()}</button></div>`;
  el.querySelector(".like").addEventListener("click", e=>{ e.stopPropagation(); toggleLike(item.id); e.currentTarget.classList.toggle("active"); });
  el.addEventListener("click", e=>{ if(e.target.closest(".like")) return; playFrom(item.id); });
  return el;
}

function renderHome(){ const groups={ALBUM:document.getElementById("albums"),EP:document.getElementById("eps"),SINGLE:document.getElementById("singles")}; Object.values(groups).forEach(g=>g.innerHTML=""); const byType={ALBUM:[],EP:[],SINGLE:[]}; state.library.forEach(x=>byType[x.type||"SINGLE"].push(x)); Object.entries(byType).forEach(([t,arr])=>{ const grid=groups[t]; if(!grid) return; if(arr.length===0){ grid.innerHTML=`<div class="empty">NO ${t}</div>`; } else arr.forEach(x=>grid.appendChild(card(x))); }); }

function renderLiked(){ const grid=document.getElementById("likedGrid"); grid.innerHTML=""; const liked=state.library.filter(x=>state.likes.includes(x.id)); if(liked.length===0){ grid.innerHTML='<div class="empty">NO LIKED SONGS</div>'; return;} liked.forEach(x=>grid.appendChild(card(x))); }

function toggleLike(id){ const i=state.likes.indexOf(id); if(i>-1) state.likes.splice(i,1); else state.likes.push(id); save(); renderLiked(); renderHome(); }

const audio=document.getElementById("audio"); const pCover=document.getElementById("pCover"); const pTitle=document.getElementById("pTitle"); const pArtist=document.getElementById("pArtist"); const playBtn=document.getElementById("play"); const nextBtn=document.getElementById("next"); const prevBtn=document.getElementById("prev"); const seek=document.getElementById("seek"); const cur=document.getElementById("cur"); const dur=document.getElementById("dur"); const vol=document.getElementById("vol");

function formatTime(t){ if(!isFinite(t)) return "0:00"; const m=Math.floor(t/60); const s=Math.floor(t%60).toString().padStart(2,"0"); return `${m}:${s}`; }

function setNow(item){ if(!item){ pTitle.textContent="NOTHING PLAYING"; pArtist.textContent=""; pCover.src=""; return; } pTitle.textContent=item.title||"UNTITLED"; pArtist.textContent=item.artist||"UNKNOWN"; pCover.src=item.cover||""; }

function playFrom(id){ const idx=state.library.findIndex(x=>x.id===id); if(idx<0) return; state.current=idx; const item=state.library[idx]; setNow(item); audio.src=item.url; audio.play(); playBtn.textContent="❚❚"; }

playBtn.addEventListener("click", ()=>{ if(audio.paused){ audio.play(); playBtn.textContent="❚❚"; } else { audio.pause(); playBtn.textContent="▶"; } });
nextBtn.addEventListener("click", ()=>{ if(state.current+1<state.library.length) playFrom(state.current+1); });
prevBtn.addEventListener("click", ()=>{ if(state.current>0) playFrom(state.current-1); });
audio.addEventListener("timeupdate", ()=>{ seek.value=(audio.currentTime/audio.duration)*1000||0; cur.textContent=formatTime(audio.currentTime); dur.textContent=formatTime(audio.duration); });
seek.addEventListener("input", ()=>{ audio.currentTime=(seek.value/1000)*audio.duration; });
vol.addEventListener("input",()=>{ audio.volume=vol.value; });

function heartSvg(){ return `<svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>`; }

document.getElementById("fSubmit").addEventListener("click",()=>{
  const t=document.getElementById("fTitle").value, a=document.getElementById("fArtist").value, ty=document.getElementById("fType").value, al=document.getElementById("fAlbum").value, u=document.getElementById("fUrl").value, c=document.getElementById("fCover").value;
  if(!t||!a||!u) return alert("FILL REQUIRED FIELDS"); state.library.push({id:uid(),title:t,artist:a,type:ty,album:al,url:u,cover:c}); save(); renderHome();
});

document.getElementById("fExport").addEventListener("click",()=>{ const data=JSON.stringify(state.library,null,2); const blob=new Blob([data],{type:"application/json"}); const url=URL.createObjectURL(blob); const a=document.createElement("a"); a.href=url; a.download="library.json"; a.click(); URL.revokeObjectURL(url); });

async function hashPassword(password){ const enc=new TextEncoder(); const buf=await crypto.subtle.digest("SHA-256", enc.encode(password)); return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,"0")).join(""); }

document.getElementById("adminLogin").addEventListener("click", async ()=>{
  const pass=document.getElementById("adminPassword").value;
  const hash=await hashPassword(pass);
  const realHash="1f95c8d3c3f7b0d67a37e34d42ef61952be7e9c36be1d89fcf7f437c24396d95"; // hash of "YZY"
  if(hash===realHash){ document.getElementById("adminGate").style.display="none"; document.getElementById("adminForm").style.display="block"; document.getElementById("loginHint").textContent=""; } else { document.getElementById("loginHint").textContent="WRONG PASSWORD"; } 
});
</script>
</body>
</html>
